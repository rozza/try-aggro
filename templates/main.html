{% extends "base.html" %}

{% block container %}
<section id="quiz">

  <div class="row">
    <div class="page-header span12">
      <h1>
          {{ page + 1 }}. {{ quiz['title'] }}
      </h1>
      <h2>{{ quiz['description'] }}</h2>
    </div>
  </div>

  <div class="row">
    <div class="span6">
      <div class="tabbable">
        <ul class="nav nav-pills">
          <li class="active"><a href="#pane1" data-toggle="tab">Sample Data</a></li>
          <li><a href="#pane2" data-toggle="tab">Correct output</a></li>
        </ul>
      <div class="tab-content">
        <div id="pane1" class="tab-pane active">
          <div id="editor" class="ace-editor">{% raw data %}</div>
        </div>
        <div id="pane2" class="tab-pane">
          <div id="correct-output" class="ace-editor">{% raw correct_output %}</div>
        </div>
      </div>
      </div>
    </div>

    <div class="span6">
      <h3>Your Answer: <button id="answer-button">Try it!</button></h3>
      <form id="answer-form">
      <div class="control-group">
        <div class="controls">
          <div id="answer-input" class="ace-editor"> </div>
        </div>
      <div>
        <form id="answer-form">
          <input type="hidden" id="quiz-id" value="{{ quiz['_id'] }}">
        </form>
        <div class="alert" id="agg-message" style="display: none;">&nbsp;</span>
      </div>
      </form>

    </div>
    </div>
  </div>
</div>
  <div class="row">
    {% if page > 0 %}<a href="/{{ page }}" class="btn btn-inverse">←</a>{% end %}
    {% if has_next %}<a href="/{{ page + 2 }}" class="btn btn-inverse">→</a>{% end %}
    <div class="span12 spacer">
      <div class="progress progress-info progress-striped active">
        <div class="bar" style="width: {{ page * (100 / 13) }}%;"></div>
      </div>
    </div>
  </div>
</section>
<!-- [{"$match": {"name": "justin"}},
 {"$group": {"_id": "$name", "avg_hits": {"$avg": "$hits"}}}
] -->
{% end %}

{% block footer_scripts %}
<script src="/static/js/try-agg.js?1"></script>
{% end %}
